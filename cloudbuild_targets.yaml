steps:
  - name: gcr.io/google.com/cloudsdktool/cloud-sdk:alpine
    entrypoint: bash
    args:
      - -c
      - gsutil -m cp -r ${_TARGET_BUCKET}/* /workspace/_targets || exit 0
    id: get previous _targets metadata
  - name: ubuntu
    args:
      - bash
      - -c
      - ls -lR
    id: debug file list
  - name: gcr.io/my-project/my-targets-pipeline
    args:
      - Rscript
      - -e
      - targets::tar_make()
    id: target pipeline
    secretEnv:
      - MY_PW
timeout: 3600s
options:
  env:
    - ENV1=1234
    - ENV_USER=Dave
substitutions:
  _TARGET_BUCKET: gs://mark-edmondson-public-files/googleCloudRunner/_targets
availableSecrets:
  secretManager:
    - versionName: projects/mark-edmondson-gde/secrets/my-pw/versions/latest
      env: MY_PW
artifacts:
  objects:
    location: gs://mark-edmondson-public-files/googleCloudRunner/_targets/meta
    paths:
      - /workspace/_targets/meta/**
#Generated by googleCloudRunner::cr_build_write at 2021-12-14 22:26:43
